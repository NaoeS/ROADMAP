# 用語集

## ドメイン
- ソフトウェア化される対象となる業務や業務の知識。大抵課題を抱えている。

```
例：
「営業先のレポートを報告書として書いて上司に FB をもらう業務を効率化したい」
```

## ドメインエキスパート
- ドメインに精通している人。最初は顧客かもしれないが、ドメインを理解した開発者もなり得る。
- 一つのコンテキストに一人が適当。複数人存在しているとお互いが干渉してしまう。

## コアドメイン
- ソフトウェアの成功に不可欠なドメイン。注力すれば市場優位性を担保できるような存在。

## サブドメイン
- コアドメインではないドメイン。汎用サブドメイン、支援サブドメインに分かれる。
- IDDD 本では汎用、支援の違いを明確に理解する必要はないとしている。

## 支援サブドメイン
- コアドメインの実現を行うための補助ドメイン。戦略上コアドメインに入れ変わる可能性もある

## 汎用サブドメイン
- 特別なドメインではないが、ソフトウェアとして必要なドメイン

```
例：
認証や監視など
```

## ドメインモデル
- ドメインの抱える課題を解決するためのモデル。ドメインで扱われる用語や振る舞いで表現する

## ドメインモデル貧血症
- ドメインの振る舞いが欠如したドメインモデルのこと。DB 項目しかないなど

## コンテキスト
- ドメインの領域を区分けする単位。プログラム上では名前空間として使用される。

## ユビキタス言語
- コンテキスト内で使用される共通言語。
- ドメインエキスパートや開発者、マネージャーなど関わる人が全て共通認識を持つのが望ましい。
- コンテキスト間で共有することはない。各コンテキスト内でのみ意味が通るものとなる。
- 用語はコードにそのまま反映されることも多い。

```
例：
以下の「ログインする」は同じ用語だが、管理コンテキストでは管理者が ID とパスワードを入力してログインする行為を指す。一方、「認証コンテキスト」ではサービスを利用する一般利用者がメールアドレスを使用してパスワードレス認証する行為を指す。

　・「管理コンテキスト」の「ログインする」
　・「認証コンテキスト」の「ログインする」
```

## コンテキストマップ
- コンテキスト間の関係性を表す図。
- 線で結んで U（上流）、D（下流）の文字で関係性を示す。上流が下流に影響を与える。
- コンテキスト間の関係性を分類したものを「組織パターン」と呼ぶ→詳細に説明する
- コンテキスト間の連携方法を分類したものを「統合パターン」と呼ぶ→詳細に説明する

## エンティティ
- 一意に識別することができ、長期間に渡って変更が行われるドメインモデルのこと。

```
例：
名前やメールアドレス、プロフィールなどの属性を変更できる「ユーザ」
価格や品名などの属性を変更できる「商品」
```

## 値オブジェクト
- 計測、定量化できるプリミティブなドメインモデルのこと。
- 属性が全て同じであれば同一とみなす。一意な識別子は定義しない。
- 大抵エンティティは値オブジェクトを持つ。エンティティは値オブジェクトの正当性については関心を持たない。値オブジェクト自身がアサーションを持つ。

```
例：
メールアドレス、電話番号
```

## ドメインサービス
- 複数のドメインモデルを跨いで行わなければならない複雑なロジックをまとめるサービスのこと。
- 単一のエンティティや値オブジェクトの責務に当てはまらない場合に作成する。

## ドメインイベント
- ドメインモデルの振る舞いによって発生するイベント。
- 発生したイベントの情報を使用して何かを行う場合に必要となる→コンテキストの結合など。

## 集約
- 一塊になったエンティティや値オブジェクトのこと。
- 必ず集約ルートと呼ばれるエンティティを介して変更操作を行う。
- 整合性が担保される範囲であり、操作によって不整合が発生しないようにしなければならない。

## ファクトリ
- 複雑な集約を生成する時に使用する。
- 他コンテキストの集約を使用して集約を生成する場合もあるが、その場合は自コンテキストのドメインモデルに変換する処理を入れる。

## リポジトリ
- 集約を DB などに永続化する。
- リポジトリはインターフェース層とインフラストラクチャ層に分かれる。
- 実際に DB へ保存する処理はインフラストラクチャ層に書く。
- 層を分けることにより DB の種類や ORM が変更されてもドメインモデルへの変更を最小限にできる。

## コンテキストの結合
- あるコンテキストが他のコンテキストに連携する手法のこと。

```
例：
あるコンテキストで発生したドメインイベントを受け取って、イベントの情報を使用して「ユーザ」を作成して永続化する
```

## アプリケーションサービス
- UI 層とドメイン層との架け橋となる。
- アプリケーションサービス自体は複雑なロジックは持たない。
- 仕事量をなるべく薄くするように心がける。

## コマンド
- エンティティを操作するために必要な情報を含んだオブジェクト。
- アプリケーションサービスにて使用する。

## ヘキサゴナルアーキテクチャ
- ドメインモデルが中核にあり、外側にアプリケーション、アダプタを置くアーキテクチャ。
- アダプタを介して DB や HTTP 通信を行う。
- 内側から外側の層に依存することはなく（依存性逆転）、中核にあるドメインモデルは外側の層から影響を受けることはないため、ドメインモデルをクリーンに保つことができる。
- オニオンアーキテクチャとよく似ている。

## 腐敗防止層
- 他コンテキストから受け取ったモデルを自コンテキストのドメインモデルに変換する層。

## DPO
- Data Payload Object。複数の集約を含んだ入れ物。複数の集約を UI 層に渡す必要がある場合に使用する。

## DTO
- Data Transfer Object。必要な属性を取り出して詰め直した入れ物？→もっと調査が必要。

## 戦略的設計
- コアドメイン、コンテキスト、コンテキストマップなどの定義を行い、事業の価値やドメインへの理解を深める段階の設計。

## 戦術的設計
- エンティティ、値オブジェクト、リポジトリ、諸々のアーキテクチャなど、戦略的設計より実装側の設計
